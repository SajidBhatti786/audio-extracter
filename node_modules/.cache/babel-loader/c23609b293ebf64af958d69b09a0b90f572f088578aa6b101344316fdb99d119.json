{"ast":null,"code":"import axios, { isAxiosError } from 'axios';\nimport WebSocket from 'ws';\nimport { Writable } from 'stream';\nimport { readFile } from 'fs/promises';\nfunction createAxiosClient(params) {\n  const client = axios.create({\n    baseURL: params.baseUrl,\n    headers: {\n      Authorization: params.apiKey\n    }\n  });\n  client.interceptors.response.use(undefined, throwApiError);\n  return client;\n}\nfunction throwApiError(error) {\n  var _a, _b;\n  if (isAxiosError(error) && ((_b = (_a = error.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.error)) {\n    return Promise.reject(new Error(error.response.data.error));\n  }\n  return Promise.reject(error);\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\n/**\n * Base class for services that communicate with the API.\n */\nclass BaseService {\n  /**\n   * Create a new service.\n   * @param params The AxiosInstance to send HTTP requests to the API.\n   */\n  constructor(client) {\n    this.client = client;\n  }\n}\nclass LemurService extends BaseService {\n  summary(params) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.post(\"/lemur/v3/generate/summary\", params);\n      return data;\n    });\n  }\n  questionAnswer(params) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.post(\"/lemur/v3/generate/question-answer\", params);\n      return data;\n    });\n  }\n  actionItems(params) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.post(\"/lemur/v3/generate/action-items\", params);\n      return data;\n    });\n  }\n  task(params) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.post(\"/lemur/v3/generate/task\", params);\n      return data;\n    });\n  }\n  /**\n   * Delete the data for a previously submitted LeMUR request.\n   * @param id ID of the LeMUR request\n   */\n  purgeRequestData(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.delete(`/lemur/v3/${id}`);\n      return data;\n    });\n  }\n}\nvar RealtimeErrorType;\n(function (RealtimeErrorType) {\n  RealtimeErrorType[RealtimeErrorType[\"BadSampleRate\"] = 4000] = \"BadSampleRate\";\n  RealtimeErrorType[RealtimeErrorType[\"AuthFailed\"] = 4001] = \"AuthFailed\";\n  // Both InsufficientFunds and FreeAccount error use 4002\n  RealtimeErrorType[RealtimeErrorType[\"InsufficientFundsOrFreeAccount\"] = 4002] = \"InsufficientFundsOrFreeAccount\";\n  RealtimeErrorType[RealtimeErrorType[\"NonexistentSessionId\"] = 4004] = \"NonexistentSessionId\";\n  RealtimeErrorType[RealtimeErrorType[\"SessionExpired\"] = 4008] = \"SessionExpired\";\n  RealtimeErrorType[RealtimeErrorType[\"ClosedSession\"] = 4010] = \"ClosedSession\";\n  RealtimeErrorType[RealtimeErrorType[\"RateLimited\"] = 4029] = \"RateLimited\";\n  RealtimeErrorType[RealtimeErrorType[\"UniqueSessionViolation\"] = 4030] = \"UniqueSessionViolation\";\n  RealtimeErrorType[RealtimeErrorType[\"SessionTimeout\"] = 4031] = \"SessionTimeout\";\n  RealtimeErrorType[RealtimeErrorType[\"AudioTooShort\"] = 4032] = \"AudioTooShort\";\n  RealtimeErrorType[RealtimeErrorType[\"AudioTooLong\"] = 4033] = \"AudioTooLong\";\n  RealtimeErrorType[RealtimeErrorType[\"BadJson\"] = 4100] = \"BadJson\";\n  RealtimeErrorType[RealtimeErrorType[\"BadSchema\"] = 4101] = \"BadSchema\";\n  RealtimeErrorType[RealtimeErrorType[\"TooManyStreams\"] = 4102] = \"TooManyStreams\";\n  RealtimeErrorType[RealtimeErrorType[\"Reconnected\"] = 4103] = \"Reconnected\";\n  RealtimeErrorType[RealtimeErrorType[\"ReconnectAttemptsExhausted\"] = 1013] = \"ReconnectAttemptsExhausted\";\n})(RealtimeErrorType || (RealtimeErrorType = {}));\nconst RealtimeErrorMessages = {\n  [RealtimeErrorType.BadSampleRate]: \"Sample rate must be a positive integer\",\n  [RealtimeErrorType.AuthFailed]: \"Not Authorized\",\n  [RealtimeErrorType.InsufficientFundsOrFreeAccount]: \"Insufficient funds or you are using a free account. This feature is paid-only and requires you to add a credit card. Please visit https://assemblyai.com/dashboard/ to add a credit card to your account.\",\n  [RealtimeErrorType.NonexistentSessionId]: \"Session ID does not exist\",\n  [RealtimeErrorType.SessionExpired]: \"Session has expired\",\n  [RealtimeErrorType.ClosedSession]: \"Session is closed\",\n  [RealtimeErrorType.RateLimited]: \"Rate limited\",\n  [RealtimeErrorType.UniqueSessionViolation]: \"Unique session violation\",\n  [RealtimeErrorType.SessionTimeout]: \"Session Timeout\",\n  [RealtimeErrorType.AudioTooShort]: \"Audio too short\",\n  [RealtimeErrorType.AudioTooLong]: \"Audio too long\",\n  [RealtimeErrorType.BadJson]: \"Bad JSON\",\n  [RealtimeErrorType.BadSchema]: \"Bad schema\",\n  [RealtimeErrorType.TooManyStreams]: \"Too many streams\",\n  [RealtimeErrorType.Reconnected]: \"Reconnected\",\n  [RealtimeErrorType.ReconnectAttemptsExhausted]: \"Reconnect attempts exhausted\"\n};\nclass RealtimeError extends Error {}\nconst defaultRealtimeUrl = \"wss://api.assemblyai.com/v2/realtime/ws\";\nclass RealtimeService {\n  constructor(params) {\n    var _a, _b, _c;\n    this.listeners = {};\n    this.realtimeUrl = (_a = params.realtimeUrl) !== null && _a !== void 0 ? _a : defaultRealtimeUrl;\n    this.sampleRate = (_b = params.sampleRate) !== null && _b !== void 0 ? _b : 16000;\n    this.wordBoost = params.wordBoost;\n    this.realtimeUrl = (_c = params.realtimeUrl) !== null && _c !== void 0 ? _c : defaultRealtimeUrl;\n    if (\"apiKey\" in params) this.apiKey = params.apiKey;\n    if (\"token\" in params) this.token = params.token;\n    if (!(this.apiKey || this.token)) {\n      throw new Error(\"API key or temporary token is required.\");\n    }\n  }\n  connectionUrl() {\n    const url = new URL(this.realtimeUrl);\n    if (url.protocol !== \"wss:\") {\n      throw new Error(\"Invalid protocol, must be wss\");\n    }\n    const searchParams = new URLSearchParams();\n    if (this.token) {\n      searchParams.set(\"token\", this.token);\n    }\n    searchParams.set(\"sample_rate\", this.sampleRate.toString());\n    if (this.wordBoost && this.wordBoost.length > 0) {\n      searchParams.set(\"word_boost\", JSON.stringify(this.wordBoost));\n    }\n    url.search = searchParams.toString();\n    return url;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  on(event, listener) {\n    this.listeners[event] = listener;\n  }\n  connect() {\n    return new Promise(resolve => {\n      if (this.socket) {\n        throw new Error(\"Already connected\");\n      }\n      const url = this.connectionUrl();\n      let headers;\n      if (this.token) {\n        headers = undefined;\n      } else if (this.apiKey) {\n        headers = {\n          Authorization: this.apiKey\n        };\n      }\n      this.socket = new WebSocket(url.toString(), {\n        headers\n      });\n      this.socket.onclose = ({\n        code,\n        reason\n      }) => {\n        var _a, _b;\n        if (!reason) {\n          if (code in RealtimeErrorType) {\n            reason = RealtimeErrorMessages[code];\n          }\n        }\n        (_b = (_a = this.listeners).close) === null || _b === void 0 ? void 0 : _b.call(_a, code, reason);\n      };\n      this.socket.onerror = errorEvent => {\n        var _a, _b, _c, _d;\n        if (errorEvent.error) (_b = (_a = this.listeners).error) === null || _b === void 0 ? void 0 : _b.call(_a, errorEvent.error);else (_d = (_c = this.listeners).error) === null || _d === void 0 ? void 0 : _d.call(_c, new Error(errorEvent.message));\n      };\n      this.socket.onmessage = ({\n        data\n      }) => {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        const message = JSON.parse(data.toString());\n        if (\"error\" in message) {\n          (_b = (_a = this.listeners).error) === null || _b === void 0 ? void 0 : _b.call(_a, new RealtimeError(message.error));\n          return;\n        }\n        switch (message.message_type) {\n          case \"SessionBegins\":\n            {\n              const openObject = {\n                sessionId: message.session_id,\n                expiresAt: new Date(message.expires_at)\n              };\n              resolve(openObject);\n              (_d = (_c = this.listeners).open) === null || _d === void 0 ? void 0 : _d.call(_c, openObject);\n              break;\n            }\n          case \"PartialTranscript\":\n            {\n              // message.created is actually a string when coming from the socket\n              message.created = new Date(message.created);\n              (_f = (_e = this.listeners).transcript) === null || _f === void 0 ? void 0 : _f.call(_e, message);\n              (_h = (_g = this.listeners)[\"transcript.partial\"]) === null || _h === void 0 ? void 0 : _h.call(_g, message);\n              break;\n            }\n          case \"FinalTranscript\":\n            {\n              // message.created is actually a string when coming from the socket\n              message.created = new Date(message.created);\n              (_k = (_j = this.listeners).transcript) === null || _k === void 0 ? void 0 : _k.call(_j, message);\n              (_m = (_l = this.listeners)[\"transcript.final\"]) === null || _m === void 0 ? void 0 : _m.call(_l, message);\n              break;\n            }\n          case \"SessionTerminated\":\n            {\n              (_o = this.sessionTerminatedResolve) === null || _o === void 0 ? void 0 : _o.call(this);\n              break;\n            }\n        }\n      };\n    });\n  }\n  sendAudio(audio) {\n    if (!this.socket || this.socket.readyState !== WebSocket.OPEN) {\n      throw new Error(\"Socket is not open for communication\");\n    }\n    const payload = {\n      audio_data: Buffer.from(audio).toString(\"base64\")\n    };\n    this.socket.send(JSON.stringify(payload));\n  }\n  stream() {\n    const stream = new Writable({\n      write: (chunk, encoding, next) => {\n        this.sendAudio(chunk);\n        next();\n      }\n    });\n    return stream;\n  }\n  close(waitForSessionTermination = true) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this.socket) {\n        if (this.socket.readyState === WebSocket.OPEN) {\n          const terminateSessionMessage = `{\"terminate_session\": true}`;\n          if (waitForSessionTermination) {\n            const sessionTerminatedPromise = new Promise(resolve => {\n              this.sessionTerminatedResolve = resolve;\n            });\n            this.socket.send(terminateSessionMessage);\n            yield sessionTerminatedPromise;\n          } else {\n            this.socket.send(terminateSessionMessage);\n          }\n        }\n        this.socket.removeAllListeners();\n        this.socket.close();\n      }\n      this.listeners = {};\n      this.socket = undefined;\n    });\n  }\n}\nclass RealtimeServiceFactory {\n  constructor(client, params) {\n    this.client = client;\n    this.params = params;\n  }\n  createService(params) {\n    if (!params) params = {\n      apiKey: this.params.apiKey\n    };else if (!(\"token\" in params) && !params.apiKey) {\n      params.apiKey = this.params.apiKey;\n    }\n    return new RealtimeService(params);\n  }\n  createTemporaryToken(params) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const response = yield this.client.post(\"/v2/realtime/token\", params);\n      return response.data.token;\n    });\n  }\n}\nclass TranscriptService extends BaseService {\n  constructor(client, files) {\n    super(client);\n    this.files = files;\n  }\n  /**\n   * Create a transcript.\n   * @param params The parameters to create a transcript.\n   * @param options The options used for creating the new transcript.\n   * @returns A promise that resolves to the newly created transcript.\n   */\n  create(params, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n      const path = getPath(params.audio_url);\n      if (path !== null) {\n        const uploadUrl = yield this.files.upload(path);\n        params.audio_url = uploadUrl;\n      }\n      const res = yield this.client.post(\"/v2/transcript\", params);\n      if ((_a = options === null || options === void 0 ? void 0 : options.poll) !== null && _a !== void 0 ? _a : true) {\n        return yield this.poll(res.data.id, options);\n      }\n      return res.data;\n    });\n  }\n  poll(transcriptId, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n      const startTime = Date.now();\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        const transcript = yield this.get(transcriptId);\n        if (transcript.status === \"completed\" || transcript.status === \"error\") {\n          return transcript;\n        } else if (Date.now() - startTime < ((_a = options === null || options === void 0 ? void 0 : options.pollingTimeout) !== null && _a !== void 0 ? _a : 180000)) {\n          yield new Promise(resolve => {\n            var _a;\n            return setTimeout(resolve, (_a = options === null || options === void 0 ? void 0 : options.pollingInterval) !== null && _a !== void 0 ? _a : 3000);\n          });\n        } else {\n          throw new Error(\"Polling timeout\");\n        }\n      }\n    });\n  }\n  /**\n   * Retrieve a transcript.\n   * @param id The identifier of the transcript.\n   * @returns A promise that resolves to the transcript.\n   */\n  get(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const res = yield this.client.get(`/v2/transcript/${id}`);\n      return res.data;\n    });\n  }\n  // TODO: add options overload to support list querystring parameters\n  /**\n   * Retrieves a paged list of transcript listings.\n   * @param nextUrl The URL to retrieve the transcript list from. If not provided, the first page will be retrieved.\n   * @returns\n   */\n  list(nextUrl) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.get(nextUrl !== null && nextUrl !== void 0 ? nextUrl : \"/v2/transcript\");\n      for (const transcriptListItem of data.transcripts) {\n        transcriptListItem.created = new Date(transcriptListItem.created);\n        if (transcriptListItem.completed) {\n          transcriptListItem.completed = new Date(transcriptListItem.completed);\n        }\n      }\n      return data;\n    });\n  }\n  /**\n   * Delete a transcript\n   * @param id The identifier of the transcript.\n   * @returns A promise that resolves to the transcript.\n   */\n  delete(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const res = yield this.client.delete(`/v2/transcript/${id}`);\n      return res.data;\n    });\n  }\n  /**\n   * Search through the transcript for a specific set of keywords.\n   * You can search for individual words, numbers, or phrases containing up to five words or numbers.\n   * @param id The identifier of the transcript.\n   * @param id Keywords to search for.\n   * @return A promise that resolves to the sentences.\n   */\n  wordSearch(id, words) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.get(`/v2/transcript/${id}/word-search`, {\n        params: {\n          words: JSON.stringify(words)\n        }\n      });\n      return data;\n    });\n  }\n  /**\n   * Retrieve all sentences of a transcript.\n   * @param id The identifier of the transcript.\n   * @return A promise that resolves to the sentences.\n   */\n  sentences(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.get(`/v2/transcript/${id}/sentences`);\n      return data;\n    });\n  }\n  /**\n   * Retrieve all paragraphs of a transcript.\n   * @param id The identifier of the transcript.\n   * @return A promise that resolves to the paragraphs.\n   */\n  paragraphs(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.get(`/v2/transcript/${id}/paragraphs`);\n      return data;\n    });\n  }\n  /**\n   * Retrieve subtitles of a transcript.\n   * @param id The identifier of the transcript.\n   * @param format The format of the subtitles.\n   * @return A promise that resolves to the subtitles text.\n   */\n  subtitles(id, format = \"srt\") {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.get(`/v2/transcript/${id}/${format}`);\n      return data;\n    });\n  }\n  /**\n   * Retrieve redactions of a transcript.\n   * @param id The identifier of the transcript.\n   * @return A promise that resolves to the subtitles text.\n   */\n  redactions(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        data\n      } = yield this.client.get(`/v2/transcript/${id}/redacted-audio`);\n      return data;\n    });\n  }\n}\nfunction getPath(path) {\n  let url;\n  try {\n    url = new URL(path);\n    if (url.protocol === \"file:\") return url.pathname;else return null;\n  } catch (_a) {\n    return path;\n  }\n}\nclass FileService extends BaseService {\n  /**\n   * Upload a local file to AssemblyAI.\n   * @param path The local file to upload.\n   * @return A promise that resolves to the uploaded file URL.\n   */\n  upload(path) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const file = yield readFile(path);\n      const {\n        data\n      } = yield this.client.post(\"/v2/upload\", file, {\n        headers: {\n          \"Content-Type\": \"application/octet-stream\"\n        }\n      });\n      return data.upload_url;\n    });\n  }\n}\nclass AssemblyAI {\n  /**\n   * Create a new AssemblyAI client.\n   * @param params The parameters for the service, including the API key and base URL, if any.\n   */\n  constructor(params) {\n    params.baseUrl = params.baseUrl || \"https://api.assemblyai.com\";\n    const client = createAxiosClient(params);\n    this.files = new FileService(client);\n    this.transcripts = new TranscriptService(client, this.files);\n    this.lemur = new LemurService(client);\n    this.realtime = new RealtimeServiceFactory(client, params);\n  }\n}\nvar services = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  AssemblyAI: AssemblyAI,\n  FileService: FileService,\n  LemurService: LemurService,\n  RealtimeService: RealtimeService,\n  RealtimeServiceFactory: RealtimeServiceFactory,\n  TranscriptService: TranscriptService\n});\nclass AssemblyAIExports extends AssemblyAI {}\nmodule.exports = Object.assign(AssemblyAIExports, services);\nexport { AssemblyAI, FileService, LemurService, RealtimeService, RealtimeServiceFactory, TranscriptService, AssemblyAI as default };","map":{"version":3,"names":["axios","isAxiosError","WebSocket","Writable","readFile","createAxiosClient","params","client","create","baseURL","baseUrl","headers","Authorization","apiKey","interceptors","response","use","undefined","throwApiError","error","_a","_b","data","Promise","reject","Error","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","fulfilled","step","next","e","rejected","result","done","then","apply","SuppressedError","suppressed","message","name","BaseService","constructor","LemurService","summary","post","questionAnswer","actionItems","task","purgeRequestData","id","delete","RealtimeErrorType","RealtimeErrorMessages","BadSampleRate","AuthFailed","InsufficientFundsOrFreeAccount","NonexistentSessionId","SessionExpired","ClosedSession","RateLimited","UniqueSessionViolation","SessionTimeout","AudioTooShort","AudioTooLong","BadJson","BadSchema","TooManyStreams","Reconnected","ReconnectAttemptsExhausted","RealtimeError","defaultRealtimeUrl","RealtimeService","_c","listeners","realtimeUrl","sampleRate","wordBoost","token","connectionUrl","url","URL","protocol","searchParams","URLSearchParams","set","toString","length","JSON","stringify","search","on","event","listener","connect","socket","onclose","code","reason","close","call","onerror","errorEvent","_d","onmessage","_e","_f","_g","_h","_j","_k","_l","_m","_o","parse","message_type","openObject","sessionId","session_id","expiresAt","Date","expires_at","open","created","transcript","sessionTerminatedResolve","sendAudio","audio","readyState","OPEN","payload","audio_data","Buffer","from","send","stream","write","chunk","encoding","waitForSessionTermination","terminateSessionMessage","sessionTerminatedPromise","removeAllListeners","RealtimeServiceFactory","createService","createTemporaryToken","TranscriptService","files","options","path","getPath","audio_url","uploadUrl","upload","res","poll","transcriptId","startTime","now","get","status","pollingTimeout","setTimeout","pollingInterval","list","nextUrl","transcriptListItem","transcripts","completed","wordSearch","words","sentences","paragraphs","subtitles","format","redactions","pathname","FileService","file","upload_url","AssemblyAI","lemur","realtime","services","Object","freeze","__proto__","AssemblyAIExports","module","exports","assign","default"],"sources":["D:/Audio extractor/audio-extracter/node_modules/assemblyai/dist/index.esm.js"],"sourcesContent":["import axios, { isAxiosError } from 'axios';\nimport WebSocket from 'ws';\nimport { Writable } from 'stream';\nimport { readFile } from 'fs/promises';\n\nfunction createAxiosClient(params) {\n    const client = axios.create({\n        baseURL: params.baseUrl,\n        headers: { Authorization: params.apiKey },\n    });\n    client.interceptors.response.use(undefined, throwApiError);\n    return client;\n}\nfunction throwApiError(error) {\n    var _a, _b;\n    if (isAxiosError(error) && ((_b = (_a = error.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.error)) {\n        return Promise.reject(new Error(error.response.data.error));\n    }\n    return Promise.reject(error);\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n/**\n * Base class for services that communicate with the API.\n */\nclass BaseService {\n    /**\n     * Create a new service.\n     * @param params The AxiosInstance to send HTTP requests to the API.\n     */\n    constructor(client) {\n        this.client = client;\n    }\n}\n\nclass LemurService extends BaseService {\n    summary(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.post(\"/lemur/v3/generate/summary\", params);\n            return data;\n        });\n    }\n    questionAnswer(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.post(\"/lemur/v3/generate/question-answer\", params);\n            return data;\n        });\n    }\n    actionItems(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.post(\"/lemur/v3/generate/action-items\", params);\n            return data;\n        });\n    }\n    task(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.post(\"/lemur/v3/generate/task\", params);\n            return data;\n        });\n    }\n    /**\n     * Delete the data for a previously submitted LeMUR request.\n     * @param id ID of the LeMUR request\n     */\n    purgeRequestData(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.delete(`/lemur/v3/${id}`);\n            return data;\n        });\n    }\n}\n\nvar RealtimeErrorType;\n(function (RealtimeErrorType) {\n    RealtimeErrorType[RealtimeErrorType[\"BadSampleRate\"] = 4000] = \"BadSampleRate\";\n    RealtimeErrorType[RealtimeErrorType[\"AuthFailed\"] = 4001] = \"AuthFailed\";\n    // Both InsufficientFunds and FreeAccount error use 4002\n    RealtimeErrorType[RealtimeErrorType[\"InsufficientFundsOrFreeAccount\"] = 4002] = \"InsufficientFundsOrFreeAccount\";\n    RealtimeErrorType[RealtimeErrorType[\"NonexistentSessionId\"] = 4004] = \"NonexistentSessionId\";\n    RealtimeErrorType[RealtimeErrorType[\"SessionExpired\"] = 4008] = \"SessionExpired\";\n    RealtimeErrorType[RealtimeErrorType[\"ClosedSession\"] = 4010] = \"ClosedSession\";\n    RealtimeErrorType[RealtimeErrorType[\"RateLimited\"] = 4029] = \"RateLimited\";\n    RealtimeErrorType[RealtimeErrorType[\"UniqueSessionViolation\"] = 4030] = \"UniqueSessionViolation\";\n    RealtimeErrorType[RealtimeErrorType[\"SessionTimeout\"] = 4031] = \"SessionTimeout\";\n    RealtimeErrorType[RealtimeErrorType[\"AudioTooShort\"] = 4032] = \"AudioTooShort\";\n    RealtimeErrorType[RealtimeErrorType[\"AudioTooLong\"] = 4033] = \"AudioTooLong\";\n    RealtimeErrorType[RealtimeErrorType[\"BadJson\"] = 4100] = \"BadJson\";\n    RealtimeErrorType[RealtimeErrorType[\"BadSchema\"] = 4101] = \"BadSchema\";\n    RealtimeErrorType[RealtimeErrorType[\"TooManyStreams\"] = 4102] = \"TooManyStreams\";\n    RealtimeErrorType[RealtimeErrorType[\"Reconnected\"] = 4103] = \"Reconnected\";\n    RealtimeErrorType[RealtimeErrorType[\"ReconnectAttemptsExhausted\"] = 1013] = \"ReconnectAttemptsExhausted\";\n})(RealtimeErrorType || (RealtimeErrorType = {}));\nconst RealtimeErrorMessages = {\n    [RealtimeErrorType.BadSampleRate]: \"Sample rate must be a positive integer\",\n    [RealtimeErrorType.AuthFailed]: \"Not Authorized\",\n    [RealtimeErrorType.InsufficientFundsOrFreeAccount]: \"Insufficient funds or you are using a free account. This feature is paid-only and requires you to add a credit card. Please visit https://assemblyai.com/dashboard/ to add a credit card to your account.\",\n    [RealtimeErrorType.NonexistentSessionId]: \"Session ID does not exist\",\n    [RealtimeErrorType.SessionExpired]: \"Session has expired\",\n    [RealtimeErrorType.ClosedSession]: \"Session is closed\",\n    [RealtimeErrorType.RateLimited]: \"Rate limited\",\n    [RealtimeErrorType.UniqueSessionViolation]: \"Unique session violation\",\n    [RealtimeErrorType.SessionTimeout]: \"Session Timeout\",\n    [RealtimeErrorType.AudioTooShort]: \"Audio too short\",\n    [RealtimeErrorType.AudioTooLong]: \"Audio too long\",\n    [RealtimeErrorType.BadJson]: \"Bad JSON\",\n    [RealtimeErrorType.BadSchema]: \"Bad schema\",\n    [RealtimeErrorType.TooManyStreams]: \"Too many streams\",\n    [RealtimeErrorType.Reconnected]: \"Reconnected\",\n    [RealtimeErrorType.ReconnectAttemptsExhausted]: \"Reconnect attempts exhausted\",\n};\nclass RealtimeError extends Error {\n}\n\nconst defaultRealtimeUrl = \"wss://api.assemblyai.com/v2/realtime/ws\";\nclass RealtimeService {\n    constructor(params) {\n        var _a, _b, _c;\n        this.listeners = {};\n        this.realtimeUrl = (_a = params.realtimeUrl) !== null && _a !== void 0 ? _a : defaultRealtimeUrl;\n        this.sampleRate = (_b = params.sampleRate) !== null && _b !== void 0 ? _b : 16000;\n        this.wordBoost = params.wordBoost;\n        this.realtimeUrl = (_c = params.realtimeUrl) !== null && _c !== void 0 ? _c : defaultRealtimeUrl;\n        if (\"apiKey\" in params)\n            this.apiKey = params.apiKey;\n        if (\"token\" in params)\n            this.token = params.token;\n        if (!(this.apiKey || this.token)) {\n            throw new Error(\"API key or temporary token is required.\");\n        }\n    }\n    connectionUrl() {\n        const url = new URL(this.realtimeUrl);\n        if (url.protocol !== \"wss:\") {\n            throw new Error(\"Invalid protocol, must be wss\");\n        }\n        const searchParams = new URLSearchParams();\n        if (this.token) {\n            searchParams.set(\"token\", this.token);\n        }\n        searchParams.set(\"sample_rate\", this.sampleRate.toString());\n        if (this.wordBoost && this.wordBoost.length > 0) {\n            searchParams.set(\"word_boost\", JSON.stringify(this.wordBoost));\n        }\n        url.search = searchParams.toString();\n        return url;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    on(event, listener) {\n        this.listeners[event] = listener;\n    }\n    connect() {\n        return new Promise((resolve) => {\n            if (this.socket) {\n                throw new Error(\"Already connected\");\n            }\n            const url = this.connectionUrl();\n            let headers;\n            if (this.token) {\n                headers = undefined;\n            }\n            else if (this.apiKey) {\n                headers = { Authorization: this.apiKey };\n            }\n            this.socket = new WebSocket(url.toString(), { headers });\n            this.socket.onclose = ({ code, reason }) => {\n                var _a, _b;\n                if (!reason) {\n                    if (code in RealtimeErrorType) {\n                        reason = RealtimeErrorMessages[code];\n                    }\n                }\n                (_b = (_a = this.listeners).close) === null || _b === void 0 ? void 0 : _b.call(_a, code, reason);\n            };\n            this.socket.onerror = (errorEvent) => {\n                var _a, _b, _c, _d;\n                if (errorEvent.error)\n                    (_b = (_a = this.listeners).error) === null || _b === void 0 ? void 0 : _b.call(_a, errorEvent.error);\n                else\n                    (_d = (_c = this.listeners).error) === null || _d === void 0 ? void 0 : _d.call(_c, new Error(errorEvent.message));\n            };\n            this.socket.onmessage = ({ data }) => {\n                var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n                const message = JSON.parse(data.toString());\n                if (\"error\" in message) {\n                    (_b = (_a = this.listeners).error) === null || _b === void 0 ? void 0 : _b.call(_a, new RealtimeError(message.error));\n                    return;\n                }\n                switch (message.message_type) {\n                    case \"SessionBegins\": {\n                        const openObject = {\n                            sessionId: message.session_id,\n                            expiresAt: new Date(message.expires_at),\n                        };\n                        resolve(openObject);\n                        (_d = (_c = this.listeners).open) === null || _d === void 0 ? void 0 : _d.call(_c, openObject);\n                        break;\n                    }\n                    case \"PartialTranscript\": {\n                        // message.created is actually a string when coming from the socket\n                        message.created = new Date(message.created);\n                        (_f = (_e = this.listeners).transcript) === null || _f === void 0 ? void 0 : _f.call(_e, message);\n                        (_h = (_g = this.listeners)[\"transcript.partial\"]) === null || _h === void 0 ? void 0 : _h.call(_g, message);\n                        break;\n                    }\n                    case \"FinalTranscript\": {\n                        // message.created is actually a string when coming from the socket\n                        message.created = new Date(message.created);\n                        (_k = (_j = this.listeners).transcript) === null || _k === void 0 ? void 0 : _k.call(_j, message);\n                        (_m = (_l = this.listeners)[\"transcript.final\"]) === null || _m === void 0 ? void 0 : _m.call(_l, message);\n                        break;\n                    }\n                    case \"SessionTerminated\": {\n                        (_o = this.sessionTerminatedResolve) === null || _o === void 0 ? void 0 : _o.call(this);\n                        break;\n                    }\n                }\n            };\n        });\n    }\n    sendAudio(audio) {\n        if (!this.socket || this.socket.readyState !== WebSocket.OPEN) {\n            throw new Error(\"Socket is not open for communication\");\n        }\n        const payload = {\n            audio_data: Buffer.from(audio).toString(\"base64\"),\n        };\n        this.socket.send(JSON.stringify(payload));\n    }\n    stream() {\n        const stream = new Writable({\n            write: (chunk, encoding, next) => {\n                this.sendAudio(chunk);\n                next();\n            },\n        });\n        return stream;\n    }\n    close(waitForSessionTermination = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.socket) {\n                if (this.socket.readyState === WebSocket.OPEN) {\n                    const terminateSessionMessage = `{\"terminate_session\": true}`;\n                    if (waitForSessionTermination) {\n                        const sessionTerminatedPromise = new Promise((resolve) => {\n                            this.sessionTerminatedResolve = resolve;\n                        });\n                        this.socket.send(terminateSessionMessage);\n                        yield sessionTerminatedPromise;\n                    }\n                    else {\n                        this.socket.send(terminateSessionMessage);\n                    }\n                }\n                this.socket.removeAllListeners();\n                this.socket.close();\n            }\n            this.listeners = {};\n            this.socket = undefined;\n        });\n    }\n}\n\nclass RealtimeServiceFactory {\n    constructor(client, params) {\n        this.client = client;\n        this.params = params;\n    }\n    createService(params) {\n        if (!params)\n            params = { apiKey: this.params.apiKey };\n        else if (!(\"token\" in params) && !params.apiKey) {\n            params.apiKey = this.params.apiKey;\n        }\n        return new RealtimeService(params);\n    }\n    createTemporaryToken(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.client.post(\"/v2/realtime/token\", params);\n            return response.data.token;\n        });\n    }\n}\n\nclass TranscriptService extends BaseService {\n    constructor(client, files) {\n        super(client);\n        this.files = files;\n    }\n    /**\n     * Create a transcript.\n     * @param params The parameters to create a transcript.\n     * @param options The options used for creating the new transcript.\n     * @returns A promise that resolves to the newly created transcript.\n     */\n    create(params, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const path = getPath(params.audio_url);\n            if (path !== null) {\n                const uploadUrl = yield this.files.upload(path);\n                params.audio_url = uploadUrl;\n            }\n            const res = yield this.client.post(\"/v2/transcript\", params);\n            if ((_a = options === null || options === void 0 ? void 0 : options.poll) !== null && _a !== void 0 ? _a : true) {\n                return yield this.poll(res.data.id, options);\n            }\n            return res.data;\n        });\n    }\n    poll(transcriptId, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const startTime = Date.now();\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                const transcript = yield this.get(transcriptId);\n                if (transcript.status === \"completed\" || transcript.status === \"error\") {\n                    return transcript;\n                }\n                else if (Date.now() - startTime <\n                    ((_a = options === null || options === void 0 ? void 0 : options.pollingTimeout) !== null && _a !== void 0 ? _a : 180000)) {\n                    yield new Promise((resolve) => { var _a; return setTimeout(resolve, (_a = options === null || options === void 0 ? void 0 : options.pollingInterval) !== null && _a !== void 0 ? _a : 3000); });\n                }\n                else {\n                    throw new Error(\"Polling timeout\");\n                }\n            }\n        });\n    }\n    /**\n     * Retrieve a transcript.\n     * @param id The identifier of the transcript.\n     * @returns A promise that resolves to the transcript.\n     */\n    get(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const res = yield this.client.get(`/v2/transcript/${id}`);\n            return res.data;\n        });\n    }\n    // TODO: add options overload to support list querystring parameters\n    /**\n     * Retrieves a paged list of transcript listings.\n     * @param nextUrl The URL to retrieve the transcript list from. If not provided, the first page will be retrieved.\n     * @returns\n     */\n    list(nextUrl) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.get(nextUrl !== null && nextUrl !== void 0 ? nextUrl : \"/v2/transcript\");\n            for (const transcriptListItem of data.transcripts) {\n                transcriptListItem.created = new Date(transcriptListItem.created);\n                if (transcriptListItem.completed) {\n                    transcriptListItem.completed = new Date(transcriptListItem.completed);\n                }\n            }\n            return data;\n        });\n    }\n    /**\n     * Delete a transcript\n     * @param id The identifier of the transcript.\n     * @returns A promise that resolves to the transcript.\n     */\n    delete(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const res = yield this.client.delete(`/v2/transcript/${id}`);\n            return res.data;\n        });\n    }\n    /**\n     * Search through the transcript for a specific set of keywords.\n     * You can search for individual words, numbers, or phrases containing up to five words or numbers.\n     * @param id The identifier of the transcript.\n     * @param id Keywords to search for.\n     * @return A promise that resolves to the sentences.\n     */\n    wordSearch(id, words) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.get(`/v2/transcript/${id}/word-search`, {\n                params: {\n                    words: JSON.stringify(words),\n                },\n            });\n            return data;\n        });\n    }\n    /**\n     * Retrieve all sentences of a transcript.\n     * @param id The identifier of the transcript.\n     * @return A promise that resolves to the sentences.\n     */\n    sentences(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.get(`/v2/transcript/${id}/sentences`);\n            return data;\n        });\n    }\n    /**\n     * Retrieve all paragraphs of a transcript.\n     * @param id The identifier of the transcript.\n     * @return A promise that resolves to the paragraphs.\n     */\n    paragraphs(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.get(`/v2/transcript/${id}/paragraphs`);\n            return data;\n        });\n    }\n    /**\n     * Retrieve subtitles of a transcript.\n     * @param id The identifier of the transcript.\n     * @param format The format of the subtitles.\n     * @return A promise that resolves to the subtitles text.\n     */\n    subtitles(id, format = \"srt\") {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.get(`/v2/transcript/${id}/${format}`);\n            return data;\n        });\n    }\n    /**\n     * Retrieve redactions of a transcript.\n     * @param id The identifier of the transcript.\n     * @return A promise that resolves to the subtitles text.\n     */\n    redactions(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.client.get(`/v2/transcript/${id}/redacted-audio`);\n            return data;\n        });\n    }\n}\nfunction getPath(path) {\n    let url;\n    try {\n        url = new URL(path);\n        if (url.protocol === \"file:\")\n            return url.pathname;\n        else\n            return null;\n    }\n    catch (_a) {\n        return path;\n    }\n}\n\nclass FileService extends BaseService {\n    /**\n     * Upload a local file to AssemblyAI.\n     * @param path The local file to upload.\n     * @return A promise that resolves to the uploaded file URL.\n     */\n    upload(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const file = yield readFile(path);\n            const { data } = yield this.client.post(\"/v2/upload\", file, {\n                headers: {\n                    \"Content-Type\": \"application/octet-stream\",\n                },\n            });\n            return data.upload_url;\n        });\n    }\n}\n\nclass AssemblyAI {\n    /**\n     * Create a new AssemblyAI client.\n     * @param params The parameters for the service, including the API key and base URL, if any.\n     */\n    constructor(params) {\n        params.baseUrl = params.baseUrl || \"https://api.assemblyai.com\";\n        const client = createAxiosClient(params);\n        this.files = new FileService(client);\n        this.transcripts = new TranscriptService(client, this.files);\n        this.lemur = new LemurService(client);\n        this.realtime = new RealtimeServiceFactory(client, params);\n    }\n}\n\nvar services = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  AssemblyAI: AssemblyAI,\n  FileService: FileService,\n  LemurService: LemurService,\n  RealtimeService: RealtimeService,\n  RealtimeServiceFactory: RealtimeServiceFactory,\n  TranscriptService: TranscriptService\n});\n\nclass AssemblyAIExports extends AssemblyAI {\n}\nmodule.exports = Object.assign(AssemblyAIExports, services);\n\nexport { AssemblyAI, FileService, LemurService, RealtimeService, RealtimeServiceFactory, TranscriptService, AssemblyAI as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}